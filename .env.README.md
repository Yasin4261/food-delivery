# Environment Variables

This project uses different environment configurations for development and production.

## Files

- `.env.example` - Template with all variables and strong defaults
- `.env.dev` - Development environment (weak secrets for testing)
- `.env.prod` - Production environment (MUST be customized!)

## Setup

### Development
```bash
cp .env.example .env
# or use .env.dev for quick start
cp .env.dev .env
```

### Production
```bash
cp .env.prod .env
# IMPORTANT: Update all credentials!
```

## Environment Variables

### Server Configuration
- `PORT` - Server port (default: 8080)
- `ENV` - Environment mode: development, production

### Database Configuration
- `DATABASE_URL` - Full PostgreSQL connection string
- `DB_NAME` - Database name
- `DB_USER` - Database user
- `DB_PASSWORD` - Database password

### JWT Configuration
- `JWT_SECRET` - Secret key for JWT signing (MUST be strong in production!)
- `JWT_EXPIRATION` - Token expiration duration (default: 24h)

### CORS Configuration
- `ALLOWED_ORIGINS` - Comma-separated list of allowed origins

### Migration
- `AUTO_MIGRATE` - Automatically run migrations on startup (true/false)

## Docker Compose

Each docker-compose file includes environment variables:

- `docker-compose.yml` - Default setup with embedded secrets
- `docker-compose.dev.yml` - Development with hot reload (weak secrets)
- `docker-compose.prod.yml` - Production using `.env.prod` variables

### Usage

Development:
```bash
docker-compose -f docker-compose.dev.yml up
```

Production:
```bash
# Set environment variables first!
export JWT_SECRET="your-strong-secret-here"
export DB_PASSWORD="your-strong-password-here"

docker-compose -f docker-compose.prod.yml up -d
```

## Security Notes

⚠️ **IMPORTANT FOR PRODUCTION:**

1. **JWT_SECRET**: Generate a strong random secret
   ```bash
   openssl rand -hex 64
   ```

2. **DB_PASSWORD**: Use a strong database password

3. **Never commit** `.env`, `.env.prod`, or `.env.dev` with real secrets!

4. **Update** `ALLOWED_ORIGINS` with your actual domain

5. **Use** environment variables or secrets management in production (AWS Secrets Manager, HashiCorp Vault, etc.)
